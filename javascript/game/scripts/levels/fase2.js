/*
This file is part of Cuidando Bem.

    Cuidando Bem is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Cuidando Bem is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Cuidando Bem.  If not, see <http://www.gnu.org/licenses/>.
*/

define(["levelsData","Scene","Action","Level","Dialog","InteractiveObject","Flag","CuidandoBem","Commons","Pulseira","Prontuario","FreqRespiratoria","ScoresData"],function(e,a,o,i,r,n,t,s,c,l,g,p,m){function _(){s.flag("conversar_recepcionista")&&(s.closeDialog(),s.changeScene(1))}function f(){s.openDialog(0)}function u(){s.flag("examinar_paciente")?s.changeScene(4):(s.openDialog(10),s.flag("score_ir_posto_hora_errada")||s.flag("score_ir_posto_hora_errada",!0))}function d(){s.flag("conversar_mentor")&&(s.flag("examinar_paciente")?s.flag("coxim")?s.changeScene(2):s.openDialog(11):s.changeScene(2))}var C=require("DialogsData").fase2,b=require("DialogsData").alertas,v=require("Player");m=m.fase2;var w=new i("Level 2");w.setMaxPoints(m._sum);var x,D,O,h,S,j,V,y,I;x=c.scenes.recepcao.getClone().onLoad(function(){s.flag("conversar_recepcionista")||(s.flag("conversar_recepcionista",!0),s.openDialog(0))}),x.registerDialogs([new r(c.characters.recepcionista).setText(C.recepcao[0]).registerOption("",function(){s.flag("conversar_recepcionista",!0),s.openDialog(1)}),new r(c.characters.jogador).setText(C.recepcao[1]).registerOption("",function(){s.closeDialog()})]),x.registerInteractiveObjects([new n("intObj-conversar_recepcionista","Conversar com a Recepcionista").setCssClass("intObj-talkToReceptionist").setVisibility(!0).onClick(f),new n("io-ir_corredor_esquerda","Ir ao corredor").setCssClass("intObj-lobbyToHallway-left no-glow").onClick(_).setVisibility(!0),new n("io-ir_corredor_direita","Ir ao corredor").setCssClass("intObj-lobbyToHallway-right no-glow").onClick(_).setVisibility(!0)]),D=c.scenes.corredor.getClone().onLoad(function(){s.openCommandBar(),s.setActionVisible("btn-ir_recepcao",!0),v.stopAll(),v.play(v.audios.sfx.abrirPorta),v.playInLoop(v.audios.loops.recepcao),s.flag("conversar_mentor")?s.flag("examinar_paciente")&&!s.flag("conversar_mentor2")&&s.openDialog(2):(s.flag("conversar_mentor",!0),s.openDialog(0))}).onUnload(function(){v.stopAll(),v.play(v.audios.sfx.abrirPorta),v.playInRange(v.audios.musics.inGame)}),D.registerActions([new o("btn-ir_recepcao","Voltar para a recepção").setCssClass("action-voltarRecepcao").onClick(function(){s.changeScene(0)}).setVisibility(!0)]),D.registerDialogs([new r(c.characters.mentor).setText(C.corredor.fala1[0]).registerOption("",function(){s.flag("conversar_mentor",!0),s.openDialog(1)}),new r(c.characters.jogador).setText(C.corredor.fala1[1]).registerOption("",function(){s.closeDialog()}),new r(c.characters.mentor).setText(C.corredor.fala2[0]).registerOption("",function(){s.openDialog(3)}),new r(c.characters.jogador).setText("").registerOption(C.corredor.fala2[1],function(){s.openDialog(6)}).registerOption(C.corredor.fala2[2],function(){s.openDialog(4)}).registerOption(C.corredor.fala2[4],function(){s.openDialog(5)}).setRandomize(!0),new r(c.characters.mentor).setText(C.corredor.fala2[3]).registerOption("",function(){s.openDialog(3)}),new r(c.characters.mentor).setText(C.corredor.fala2[5]).registerOption("",function(){s.openDialog(3)}),new r(c.characters.mentor).setText(C.corredor.fala2[6]).registerOption("",function(){s.openDialog(7)}),new r(c.characters.jogador).setText("").registerOption(C.corredor.fala2[7],function(){s.closeDialog(),s.openCommandBar(),s.flag("conversar_mentor2",!0),s.flag("score_falar_com_mentor")||s.flag("score_falar_com_mentor",!0)}).registerOption(C.corredor.fala2[8],function(){s.openDialog(8)}).registerOption(C.corredor.fala2[10],function(){s.openDialog(9)}).setRandomize(!0),new r(c.characters.mentor).setText(C.corredor.fala2[9]).registerOption("",function(){s.openDialog(7)}),new r(c.characters.mentor).setText(C.corredor.fala2[11]).registerOption("",function(){s.openDialog(7)}),new r(c.characters.mentor).setText(b.enfermariaMasculina).registerOption("",function(){s.closeDialog()}),new r(c.characters.mentor).setText(b.perdido.enfermagem[0]).registerOption("",function(){s.closeDialog()})]),D.registerInteractiveObjects([new n("io-ir_sala_leitos","Ir à Enfermaria Masculina").setCssClass("intObj-goToBedroom").onClick(d).setVisibility(!0),new n("io-ir_posto_enfermagem","Ir ao Posto de Enfermagem").setCssClass("intObj-goToNursingStation").onClick(u).setVisibility(!0),new n("io-conversar_mentor","Conversar com Mentor").setCssClass("intObj-talkToMentor").onClick(function(){s.closeCommandBar(),s.flag("examinar_paciente")?s.flag("examinar_paciente")&&s.openDialog(2):(s.flag("conversar_mentor",!0),s.openDialog(0))}).setVisibility(!0)]),O=new a("salaDeLeitos","scene-salaDeLeitos").setCssClass("scene-bedroom-level1a").onLoad(function(){s.flag("colocou_coxim")&&(s.setActionVisible("btn-ler_prontuario",!0),s.changeSceneCssClassTo("scene-bedroom-level1b"),s.setInteractiveObjectVisible("io-ir_leito",!1)),s.openCommandBar()}).onUnload(function(){s.closeCommandBar()}),O.registerInteractiveObjects([new n("io-ir_leito","Ir ao leito").setCssClass("intObj-ir_leito-fase1").onClick(function(){s.flag("lavarMaos")?s.changeScene(3):s.openDialog(0)}).setVisibility(!0),new n("io-ir_corredor","Ir ao Corredor").setCssClass("intObj-bedroomToHallway").onClick(function(){s.flag("foi_ao_leito")?s.flag("lavar_maos2")?s.changeScene(1):s.openDialog(1):s.changeScene(1)}).setVisibility(!0)]),O.registerActions([new o("btn-lavarMaos","Lavar as mãos").setCssClass("action-lavarMaos").onClick(function(){v.play(v.audios.sfx.lavarMaos),s.flag("lavarMaos")?!s.flag("lavar_maos2")&&s.flag("examinar_paciente")?(s.flag("lavar_maos2",!0),s.flag("score_lavar_maos_depois_exame")||(s.registerScoreItem(m.lavarMaosDepois),s.flag("score_lavar_maos_depois_exame",!0))):!s.flag("lavar_maos3")&&s.flag("colocou_coxim")&&(s.flag("lavar_maos3",!0),s.flag("score_lavar_maos_prontuario")||s.flag("score_lavar_maos_prontuario",!0)):(s.flag("lavarMaos",!0),s.flag("score_lavar_maos_antes_exame")||(s.registerScoreItem(m.lavarMaosAntes),s.flag("score_lavar_maos_antes_exame",!0)))}).setVisibility(!0),new o("btn-ler_prontuario","Ler prontuario").setCssClass("action-ler_prontuario").onClick(function(){s.flag("lavar_maos3")?(s.flag("score_ler_prontuario")||(s.flag("score_ler_prontuario",!0),s.registerScoreItem(m.lerProntuario)),g.open(),s.openModalScene("Prontuario")):s.openDialog(2)}).setVisibility(!1)]),O.registerDialogs([new r(c.characters.mentor).setText(b.lavarMaos.tipo1).registerOption("",function(){s.closeDialog()}),new r(c.characters.mentor).setText(b.lavarMaos.tipo2).registerOption("",function(){s.closeDialog()}),new r(c.characters.mentor).setText(b.lavarMaos.tipo3).registerOption("",function(){s.closeDialog()})]),h=c.scenes.leitos.carlos.getClone().onLoad(function(){s.openCommandBar(),s.flag("examinar_paciente")||s.setInteractiveObjectVisible("io-pulseira_paciente",!0),s.flag("conversar_mentor2")&&(s.setActionVisible("btn-examinar_paciente",!1),s.flag("coxim")&&(s.setInteractiveObjectVisible("io-conversar_paciente02",!1),s.flag("mudar_posicao_paciente")?s.flag("colocou_coxim")||(s.setActionVisible("btn-mudar_posicao",!1),s.setInteractiveObjectVisible("io-pulseira_paciente",!1),s.setActionVisible("btn-posicionar_coxim_e_travesseiro",!0)):s.setActionVisible("btn-mudar_posicao",!0)))}).onUnload(function(){s.closeCommandBar()}),h.registerInteractiveObjects([new n("io-pulseira_paciente","Checar pulseira do paciente").setCssClass("intObj-paciente_02-checar_pulseira").onClick(function(){s.openModalScene("pulseira"),l.open(),s.openCommandBar()}).setVisibility(!0).setEnable(!1),new n("io-pulseira_paciente2","Checar pulseira do paciente").setCssClass("intObj-paciente_02-checar_pulseira_virado").onClick(function(){s.openModalScene("pulseira2"),l.open(),s.openCommandBar()}).setVisibility(!1),new n("io-conversar_paciente02","Falar com o paciente").setCssClass("intObj-conversar_paciente").onClick(function(){s.flag("score_falar_paciente")||(s.registerScoreItem(m.falarComPaciente),s.flag("score_falar_paciente",!0)),s.openDialog(0),s.closeCommandBar()}).setVisibility(!0)]),h.registerDialogs([new r(c.characters.jogador).setText("").registerOption(C.enfermaria[0],function(){s.openDialog(3)}).registerOption(C.enfermaria[1],function(){s.openDialog(1)}).registerOption(C.enfermaria[3],function(){s.openDialog(2)}).setRandomize(!0),new r(c.characters.mentor).setText(C.enfermaria[2]).registerOption("",function(){s.openDialog(0)}),new r(c.characters.mentor).setText(C.enfermaria[4]).registerOption("",function(){s.openDialog(0)}),new r(c.characters.pacientes.carlos).setText(C.enfermaria[5]).registerOption("",function(){s.openDialog(4)}),new r(c.characters.jogador).setText("").registerOption(C.enfermaria[6],function(){s.openDialog(7)}).registerOption(C.enfermaria[7],function(){s.openDialog(5)}).registerOption(C.enfermaria[9],function(){s.openDialog(6)}).setRandomize(!0),new r(c.characters.mentor).setText(C.enfermaria[8]).registerOption("",function(){s.openDialog(4)}),new r(c.characters.mentor).setText(C.enfermaria[10]).registerOption("",function(){s.openDialog(4)}),new r(c.characters.pacientes.carlos).setText(C.enfermaria[11]).registerOption("",function(){s.openDialog(10)}),new r(c.characters.jogador).setText(C.perguntarNome).registerOption("",function(){s.openDialog(9)}),new r(c.characters.pacientes.carlos).setText(C.enfermaria[11]).registerOption("",function(){s.openCommandBar(),s.closeDialog()}),new r(c.characters.jogador).setText(C.enfermaria[12]).registerOption("",function(){s.openCommandBar(),s.closeDialog(),s.flag("conversarPaciente",!0),s.enableInteractiveObject("io-pulseira_paciente",!0),s.setActionVisible("btn-ir_sala_leitos",!0)})]),h.registerActions([new o("btn-examinar_paciente","Inspecionar Pele").setCssClass("action-examinar_paciente").onClick(function(){v.play(v.audios.sfx.toquePele),s.openModalScene("zoomChar2"),s.flag("examinar_paciente",!0)}).setVisibility(!1),new o("btn-perguntar_nome","Perguntar nome do paciente").setCssClass("action-leito-char-02").onClick(function(){s.closeCommandBar(),s.openDialog(8)}).setVisibility(!1),new o("btn-ir_sala_leitos","Ir para sala de leitos").setCssClass("action-ir_sala_de_leitos").onClick(function(){s.flag("examinar_paciente"),s.changeScene(2)}).setVisibility(!1),new o("btn-mudar_posicao","Mudar posição do paciente").setCssClass("action-mudar_posicao_paciente").onClick(function(){v.play(v.audios.sfx.roupaRocando),s.changeSceneCssClassTo("scene-bedChar02-turned"),s.setActionVisible("btn-mudar_posicao",!1),s.setInteractiveObjectVisible("io-pulseira_paciente",!1),s.setInteractiveObjectVisible("io-pulseira_paciente2",!0),s.setActionVisible("btn-posicionar_coxim_e_travesseiro",!0),s.flag("mudar_posicao_paciente",!0),s.flag("score_mudar_posicao")||(s.flag("score_mudar_posicao",!0),s.registerScoreItem(m.mudarPosicaoCoxim))}).setVisibility(!1),new o("btn-posicionar_coxim_e_travesseiro","Posicionar coxim e travesseiro").setCssClass("action-posicionar_coxim").onClick(function(){v.play(v.audios.sfx.objetoRocando),s.changeSceneCssClassTo("scene-bedChar02-cushion"),s.setActionVisible("btn-posicionar_coxim_e_travesseiro",!1),s.flag("colocou_coxim",!0)}).setVisibility(!1)]),S=c.scenes.postoDeEnfermagem.getClone().onLoad(function(){s.openCommandBar()}).onUnload(function(){s.closeCommandBar()}),S.registerActions([new o("btn-ir_corredor","Ir ao corredor").setCssClass("action-ir_corredor").onClick(function(){s.flag("coxim")?s.changeScene(1):s.openDialog(0)}).setVisibility(!0)]),S.registerInteractiveObjects([new n("io-abrirGaveta","Abrir gaveta").setCssClass("intObj-openDrawer").onClick(function(){s.flag("pegou_bandeja")?(v.play(v.audios.sfx.abrirGaveta),s.openModalScene("gaveta"),s.openCommandBar(),s.setInteractiveObjectVisible("io-coxim",!s.flag("coxim"))):s.openDialog(1)}).setVisibility(!0),new n("io-pegar_bandeja","Pegar bandeja").setCssClass("intObj-bandeja").onClick(function(){v.play(v.audios.sfx.pegarObjeto),s.flag("pegou_bandeja",!0),s.setInteractiveObjectVisible("io-pegar_bandeja",!1)}).setVisibility(!0)]),S.registerDialogs([new r(c.characters.mentor).setText(b.esqueceu.coxim).registerOption("",function(){s.closeDialog()}),new r(c.characters.mentor).setText(b.esqueceu.pegarBandeja).registerOption("",function(){s.closeDialog()})]),I=new a("zoomChar2","Examinando paciente").setCssClass("modalScene-zoom-char2"),I.registerActions([new o("btn-fechar_zoom","Finalizar Inspeção").setCssClass("action-terminar_exame").onClick(function(){s.closeModalScene("zoomChar2"),s.setActionVisible("btn-ir_sala_leitos",!0),s.flag("score_examinar_paciente")||(s.registerScoreItem(m.examinarPaciente),s.flag("score_examinar_paciente",!0))})]),V=new a("pulseira","pulseira"),V.registerInteractiveObjects([]),V.registerActions([new o("btn-largar_pulseira","Fechar pulseira").setCssClass("action-pulseira_paciente").onClick(function(){s.closeModalScene("Pulseira"),!s.flag("confirmou_pulseira")&&s.flag("conversarPaciente")&&(s.flag("confirmou_pulseira",!0),s.setActionVisible("btn-examinar_paciente",!0),s.flag("score_verificar_pulseira")||(s.registerScoreItem(m.verificarPulseira),s.flag("score_verificar_pulseira",!0))),l.close()}).setVisibility(!0)]),pulseira2=new a("pulseira2","pulseira2"),pulseira2.registerInteractiveObjects([]),pulseira2.registerActions([new o("btn-largar_pulseira","Fechar pulseira").setCssClass("action-pulseira_paciente").onClick(function(){s.closeModalScene("Pulseira"),l.close()}).setVisibility(!0)]),j=new a("gaveta","Gaveta").setCssClass("modalScene-drawer"),j.registerActions([new o("btn-fecharGaveta","Fechar gaveta").setCssClass("action-fecharGaveta").onClick(function(){v.play(v.audios.sfx.fecharGaveta),s.closeModalScene("Gaveta")}).setVisibility(!0)]),j.registerInteractiveObjects([new n("io-coxim","Coxim").setCssClass("intObj-cushion").onClick(function(){s.flag("coxim",!0),v.play(v.audios.sfx.pegarObjeto),s.setInteractiveObjectVisible("io-coxim",!1),s.flag("score_pegar_coxim")||(s.registerScoreItem(m.pegarCoxim),s.flag("score_pegar_coxim",!0))}).setVisibility(!0)]),y=new a("Prontuario","Prontuario"),y.registerActions([new o("btn-fechar_prontuario","Fechar prontuário").setCssClass("action-ler_prontuario").onClick(function(){g.close(),s.closeModalScene("Prontuario"),s.flag("colocou_coxim")&&g.isDataValid()&&(s.registerScoreItem(m.anotarNoProntuario),s.unlockLevel(3),s.closeCommandBar(),s.showEndOfLevel(),v.stopAll(),v.play(v.audios.sfx.missaoCumprida))})]),w.registerScene(x),w.registerScene(D),w.registerScene(O),w.registerScene(h),w.registerScene(S),w.registerModalScene(V),w.registerModalScene(pulseira2),w.registerModalScene(j),w.registerModalScene(y),w.registerModalScene(I),w.setSetupScript(function(){l.setNameRegExp(/^Carlos Esme Gouv(e|ê)a$/i),l.setLeitoRegExp(/0*3/),l.setDataRegExp(/01\/12\/1945/),l.setName("Carlos Esme Gouvêa"),l.setLeito("03"),l.setData("01/12/1945"),l.disable(),g.setNome("Carlos Esme Gouvêa"),g.setSexo("M"),g.setEstadoCivil("Casado"),g.setDataNascimento("01/12/1945"),g.setIdade("69 anos"),g.setProfissao("Aposentado (advogado)"),g.setPai("Leonardo Gouvêa"),g.setMae("Maria Clara Esme Gouvêa"),g.setAlergiaMedicamentosa(!1,""),g.setDisableAlergiaMedicamentosa(!0),g.setDataInternacao("15/06/2015"),g.setLeito("02 - Enfermaria Masculina"),g.setAntecedentes("Nenhum"),g.setHipotese("Pneumonia brônquica, insuficiência respiratória e anemia ferropriva."),g.setObservacoes("Possui incontinência urinária, acamado."),g.setPrescEnfermagemState(["decubito"]),g.setPeso("72"),g.setAltura("1,68"),g.setCircunferenciaAbdominal("135"),g.setPrescMedicaRowData(0,"","Sulfato ferroso","Oral","drágea 250 mg","2x dia",!0,!0),g.setPrescMedicaRowData(1,"","Azitromicina","Oral","comp 500 mg","1x dia",!0,!0),g.setPrescMedicaRowData(2,"","","","","",!1,!0),g.setPrescMedicaRowData(3,"","","","","",!1,!0),g.setSsvvRowData(0,"","130x80","65","14","94","36",!0),g.setSsvvRowData(1,"","","","","","",!0),g.setAnotacaoEnfermagemRowData("","")}),w.registerFlag(new t("conversar_recepcionista",!1)),w.registerFlag(new t("conversar_mentor",!1)),w.registerFlag(new t("conversar_mentor2",!1)),w.registerFlag(new t("foi_ao_leito",!1)),w.registerFlag(new t("conversarPaciente",!1)),w.registerFlag(new t("confirmou_pulseira",!1)),w.registerFlag(new t("examinar_paciente",!1)),w.registerFlag(new t("mudar_posicao_paciente",!1)),w.registerFlag(new t("lavarMaos",!1)),w.registerFlag(new t("lavar_maos2",!1)),w.registerFlag(new t("lavar_maos3",!1)),w.registerFlag(new t("coxim",!1)),w.registerFlag(new t("colocou_coxim",!1)),w.registerFlag(new t("pegou_bandeja",!1)),w.registerFlag(new t("score_lavar_maos_antes_exame",!1)),w.registerFlag(new t("score_lavar_maos_depois_exame",!1)),w.registerFlag(new t("score_lavar_maos_prontuario",!1)),w.registerFlag(new t("score_ir_posto_hora_errada",!1)),w.registerFlag(new t("score_falar_paciente",!1)),w.registerFlag(new t("score_verificar_pulseira",!1)),w.registerFlag(new t("score_examinar_paciente",!1)),w.registerFlag(new t("score_pegar_coxim",!1)),w.registerFlag(new t("score_anotar_prontuario",!1)),w.registerFlag(new t("score_ler_prontuario",!1)),w.registerFlag(new t("score_mudar_posicao",!1)),w.registerFlag(new t("score_falar_com_mentor",!1)),w.registerFlag(new t("score_nao_lavar_maos_prontuario",!1)),w.setInitialScene(0),e.registerLevel(w,2)});